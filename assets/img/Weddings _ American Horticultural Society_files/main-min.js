function setup_home(){function o(){theIndex<3?theIndex++:theIndex=0}function u(t){e.find("li").fadeOut(750);e.find("li").eq(t).fadeIn(750)}function a(){o();u(theIndex);f(r.eq(theIndex));c()}function f(e){e.addClass("active").siblings().removeClass("active")}function l(){r.eq(theIndex).find("span").css({width:"0"})}function c(){l();r.eq(theIndex).find("span").animate({width:"100%"},timeout);t=setTimeout(a,timeout)}var e=$(".slideshow"),n=$(".switcher"),r=n.find("li"),i=n.find("li > span"),s=e.offset().top-25;theIndex=0,slideAmount=0,timeout=6e3,t=0;c();r.on("click",function(e){e.preventDefault();theIndex=$(this).index();u(theIndex);f($(this));l();clearInterval(t);$("body,html").animate({scrollTop:s},500)})}function setup_leftsidebar_callouts(){function s(){for(var e=1;e<=n;e++)r.push(e)}function o(){r.length==0&&s();var e=Math.floor(r.length*Math.random()),t=r[e]-1;r.splice(e,1);return t}function u(){r.length==0&&s();var e=Math.floor(Math.random()*(r.length-1))+1,t=r[e]-1;r.splice(e,1);return t}function a(e,t){var n=[];for(var r=0;r<e;r++)t?n.push(u()):n.push(o());return n}var e=$("#left-sidebar"),t=e.find(".box"),n=t.length,r=[],i=[];if(e.hasClass("gardening-publications"))if(e.hasClass("the-american-gardener")){if(!($("#content").height()<400))if($("#content").height()<800){var f=Math.floor(Math.random()*n)+1;t.eq(f-1).show()}else{i=a(2,!0);for(var l=0;l<i.length;l++)t.eq(i[l]).show()}}else{var f=Math.floor(Math.random()*(n-1))+1;t.eq(0).show();t.eq(f).show()}else if(e.hasClass("home")){var f=Math.floor(Math.random()*4)+0;t.eq(f).show();t.eq(4).show()}else if(!($("#content").height()<400))if($("#content").height()<800){var f=Math.floor(Math.random()*n)+1;t.eq(f-1).show()}else{i=a(2,!1);for(var l=0;l<i.length;l++)t.eq(i[l]).show()}}function setup_detailside_callouts(){var e=$(".detail-side"),t=e.find(".letter");$(".detail-content").height()<400&&t.hide()}function setup_contact(){var e=window.location.hash;$("#purpose").change(function(){$(this).val()=="employment"?$("#content .employment").slideDown():$("#content .employment").slideUp();$(this).val()=="membership"?$("#content .membership").slideDown():$("#content .membership").slideUp();$(this).val()=="rentals"?$("#content .rentals").slideDown():$("#content .rentals").slideUp()});if(e){e.charAt(0)=="#"&&(e=e.substr(1));if(e=="complete"){$(".form.contact").hide();$(".thankyou-message").show().fadeTo("fast",1)}if(e=="letter-to-the-editor")$("#purpose").val(e).change();else{$("#careers").val(e).change();$("#purpose").val("employment").change()}}}function setup_map(){var e,t,n=710,r=function(){function o(t,n){if(t=="all")$.map(e.states,function(t,n){e.colorState(n,s.normal)});else for(var r=0;r<t.length;r++)e.colorState(t[r].abbr,n)}function u(e){$(".event").fadeOut().promise().done(function(){$(this).filter('[data-location*="'+e+'"]').length?$(this).filter('[data-location*="'+e+'"]').fadeIn():$(this).filter('[data-location*="no-events"]').fadeIn();$("#region-name").text(e)})}function a(e){$(".master-gardener").fadeOut().promise().done(function(){$(this).filter('[data-location*="'+i[e]+'"]').fadeIn();$("#region-name").text(i[e])})}t=new ScaleRaphael("plot-map-container",950,650);e=t.USMap();t.scaleAll(n/e.width);var r=[{color:"#77953E",states:[{abbr:"CT",clicked:!1},{abbr:"MA",clicked:!1},{abbr:"ME",clicked:!1},{abbr:"NH",clicked:!1},{abbr:"NY",clicked:!1},{abbr:"RI",clicked:!1},{abbr:"VT",clicked:!1}],name:"North East",slug:"NE",clicked:!1},{color:"#77953E",states:[{abbr:"PA",clicked:!1},{abbr:"NJ",clicked:!1},{abbr:"VA",clicked:!1},{abbr:"MD",clicked:!1},{abbr:"DE",clicked:!1},{abbr:"WV",clicked:!1},{abbr:"DC",clicked:!1}],name:"Mid-Atlantic",slug:"MA",clicked:!1},{color:"#77953E",states:[{abbr:"AL",clicked:!1},{abbr:"FL",clicked:!1},{abbr:"GA",clicked:!1},{abbr:"KY",clicked:!1},{abbr:"NC",clicked:!1},{abbr:"SC",clicked:!1},{abbr:"TN",clicked:!1}],name:"South East",slug:"SE",clicked:!1},{color:"#77953E",states:[{abbr:"IA",clicked:!1},{abbr:"IL",clicked:!1},{abbr:"IN",clicked:!1},{abbr:"MN",clicked:!1},{abbr:"MI",clicked:!1},{abbr:"ND",clicked:!1},{abbr:"NE",clicked:!1},{abbr:"OH",clicked:!1},{abbr:"SD",clicked:!1},{abbr:"WI",clicked:!1}],name:"North Central",slug:"NC",clicked:!1},{color:"#77953E",states:[{abbr:"AR",clicked:!1},{abbr:"KS",clicked:!1},{abbr:"LA",clicked:!1},{abbr:"MO",clicked:!1},{abbr:"MS",clicked:!1},{abbr:"OK",clicked:!1},{abbr:"TX",clicked:!1}],name:"South Central",slug:"SC",clicked:!1},{color:"#77953E",states:[{abbr:"AZ",clicked:!1},{abbr:"NM",clicked:!1},{abbr:"CO",clicked:!1},{abbr:"UT",clicked:!1}],name:"South West",slug:"SW",clicked:!1},{color:"#77953E",states:[{abbr:"CA",clicked:!1},{abbr:"NV",clicked:!1},{abbr:"HI",clicked:!1}],name:"West Coast",slug:"WC",clicked:!1},{color:"#77953E",states:[{abbr:"AK",clicked:!1},{abbr:"ID",clicked:!1},{abbr:"MT",clicked:!1},{abbr:"OR",clicked:!1},{abbr:"WA",clicked:!1},{abbr:"WY",clicked:!1}],name:"North West",slug:"NW",clicked:!1}],i={AL:"Alabama",AK:"Alaska",AS:"America Samoa",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District of Columbia",FM:"Micronesia1",FL:"Florida",GA:"Georgia",GU:"Guam",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MH:"Islands1",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PW:"Palau",PA:"Pennsylvania",PR:"Puerto Rico",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VI:"Virgin Island",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"},s={hover:"#87a948",clicked:"#e38120",normal:"#77953e"};$("#plot-map-container").hasClass("states")?inStates=!0:inStates=!1;$.each(r,function(){var t=this,n=t.color,i=t.slug,f=t.states,l=t.name;$.each(f,function(){var i=this,c=i.clicked;e.colorState(i.abbr,n);e.fetchStateBy2Letter(i.abbr).hover(function(){var n;if(inStates){i.clicked?n=s.clicked:n=s.hover;i.clicked?e.colorState(i.abbr,n):e.colorState(i.abbr,n)}else{t.clicked?n=s.clicked:n=s.hover;o(f,n)}},function(){if(inStates){var n;i.clicked?n=s.clicked:n=s.normal;i.clicked?e.colorState(i.abbr,n):e.colorState(i.abbr,n)}else t.clicked||o(f,s.normal)}).click(function(){$("#region-name").show();if(inStates){$.each(r,function(){var e=this,t=e.states;$.each(t,function(){var e=this;e.clicked=!1})});i.clicked=!0;o("all",n);e.colorState(i.abbr,s.clicked);a(i.abbr)}else{$.each(r,function(){this.clicked=!1});t.clicked=!0;o("all",n);o(f,s.clicked);u(l)}})})});$(".region-event-link").click(function(e){e.preventDefault();$(".event").eq(0).fadeOut("slow",function(){$(".post-info").fadeIn();$("#region-name").text("All Regions")})})};r()}function setup_gallery(){var e=$(".photo_gallery");e.each(function(){function s(t){var n=parseInt(i.css("left")),r=Math.floor(e.length/5),s=r*615*-1;t=="prev"?slideAmount=615:slideAmount=-615;var o=n+slideAmount;o>=s&&o<=0&&$(".thumb-slider-holder ul").animate({left:o+"px"})}function o(e,t){$(".caption-credit").find(".caption").text(e).next(".credit").text(t)}var e=$(this).find(".slide_thumb"),t=$(this).find(".slider-frame ul"),n=$(this).find(".link-prev"),r=$(this).find(".link-next"),i=$(this).find(".thumb-slider-holder ul");if(e.length<=5){n.hide();r.hide()}else{n.click(function(e){e.preventDefault();s("prev")});r.click(function(e){e.preventDefault();s("next")})}e.click(function(n){n.preventDefault();var r=$(this).index(),i=r*706*-1,s=$(this).find("img").attr("alt"),u=$(this).attr("data-credit");u&&(u="Credit: "+u);e.removeClass("active");$(this).addClass("active");t.animate({left:i+"px"},function(){o(s,u)})});o(i.find("li.active").find("img").attr("alt"),"")})}function initInputs(){PlaceholderInput.replaceByOptions({clearInputs:!0,clearTextareas:!0,clearPasswords:!0,skipClass:"default",wrapWithElement:!1,showUntilTyping:!1,getParentByClass:!1,placeholderAttr:"value"})}$(document).ready(function(){$.fn.foundationCustomForms?$(document).foundationCustomForms():null;$(".photo_gallery").length>0&&setup_gallery();$("#content.contact").length>0&&setup_contact();$("#plot-map-container").length>0&&setup_map();$("body.home").length>0&&setup_home();$("#left-sidebar").length>0&&setup_leftsidebar_callouts();$(".detail-side").length>0&&setup_detailside_callouts();var e=$("body.overview #content");if(e.length>0&&e.height()<700){$("#sidebar .box:last").remove();$("#main").addClass("short")}});(function(){function t(e){var t=[];for(var n=0,r=t.length=e.length;n<r;n++)t[n]=e[n];return t}function n(e){return(e.type?e.type:e.tagName).toLowerCase()}function r(e,t){return e.className?e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)")):!1}function i(e,t){r(e,t)||(e.className+=" "+t)}function s(e,t){r(e,t)&&(e.className=e.className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," "))}function o(e,t){return function(){return e.apply(t,arguments)}}function u(e,t){return document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null)[t]:e.currentStyle?e.currentStyle[t]:e.style[t]}var e=[];PlaceholderInput=function(){this.options={element:null,showUntilTyping:!1,wrapWithElement:!1,getParentByClass:!1,placeholderAttr:"value",inputFocusClass:"focus",inputActiveClass:"text-active",parentFocusClass:"parent-focus",parentActiveClass:"parent-active",labelFocusClass:"label-focus",labelActiveClass:"label-active",fakeElementClass:"input-placeholder-text"};e.push(this);this.init.apply(this,arguments)};PlaceholderInput.refreshAllInputs=function(t){for(var n=0;n<e.length;n++)t!==e[n]&&e[n].refreshState()};PlaceholderInput.replaceByOptions=function(e){var r=[].concat(t(document.getElementsByTagName("input")),t(document.getElementsByTagName("textarea")));for(var i=0;i<r.length;i++)if(r[i].className.indexOf(e.skipClass)<0){var s=n(r[i]);(e.clearInputs&&(s==="text"||s==="email")||e.clearTextareas&&s==="textarea"||e.clearPasswords&&s==="password")&&new PlaceholderInput({element:r[i],wrapWithElement:e.wrapWithElement,showUntilTyping:e.showUntilTyping,getParentByClass:e.getParentByClass,placeholderAttr:r[i].getAttribute("placeholder")?"placeholder":e.placeholderAttr})}};PlaceholderInput.prototype={init:function(e){this.setOptions(e);if(this.element&&this.element.PlaceholderInst)this.element.PlaceholderInst.refreshClasses();else{this.element.PlaceholderInst=this;if(this.elementType!=="radio"||this.elementType!=="checkbox"||this.elementType!=="file"){this.initElements();this.attachEvents();this.refreshClasses()}}},setOptions:function(e){for(var t in e)e.hasOwnProperty(t)&&(this.options[t]=e[t]);if(this.options.element){this.element=this.options.element;this.elementType=n(this.element);this.wrapWithElement=this.elementType==="password"||this.options.showUntilTyping?!0:this.options.wrapWithElement;this.setPlaceholderValue(this.options.placeholderAttr)}},setPlaceholderValue:function(e){this.origValue=e==="value"?this.element.defaultValue:this.element.getAttribute(e)||"";this.options.placeholderAttr!=="value"&&this.element.removeAttribute(this.options.placeholderAttr)},initElements:function(){if(this.wrapWithElement){this.fakeElement=document.createElement("span");this.fakeElement.className=this.options.fakeElementClass;this.fakeElement.innerHTML+=this.origValue;this.fakeElement.style.color=u(this.element,"color");this.fakeElement.style.position="absolute";this.element.parentNode.insertBefore(this.fakeElement,this.element);if(this.element.value===this.origValue||!this.element.value){this.element.value="";this.togglePlaceholderText(!0)}else this.togglePlaceholderText(!1)}else!this.element.value&&this.origValue.length&&(this.element.value=this.origValue);if(this.element.id){this.labels=document.getElementsByTagName("label");for(var e=0;e<this.labels.length;e++)if(this.labels[e].htmlFor===this.element.id){this.labelFor=this.labels[e];break}}this.elementParent=this.element.parentNode;if(typeof this.options.getParentByClass=="string"){var t=this.element;while(t.parentNode){if(r(t.parentNode,this.options.getParentByClass)){this.elementParent=t.parentNode;break}t=t.parentNode}}},attachEvents:function(){this.element.onfocus=o(this.focusHandler,this);this.element.onblur=o(this.blurHandler,this);if(this.options.showUntilTyping){this.element.onkeydown=o(this.typingHandler,this);this.element.onpaste=o(this.typingHandler,this)}this.wrapWithElement&&(this.fakeElement.onclick=o(this.focusSetter,this))},togglePlaceholderText:function(e){this.wrapWithElement?this.fakeElement.style.display=e?"":"none":this.element.value=e?this.origValue:""},focusSetter:function(){this.element.focus()},focusHandler:function(){clearInterval(this.checkerInterval);this.checkerInterval=setInterval(o(this.intervalHandler,this),1);this.focused=!0;if(!this.element.value.length||this.element.value===this.origValue)this.options.showUntilTyping||this.togglePlaceholderText(!1);this.refreshClasses()},blurHandler:function(){clearInterval(this.checkerInterval);this.focused=!1;(!this.element.value.length||this.element.value===this.origValue)&&this.togglePlaceholderText(!0);this.refreshClasses();PlaceholderInput.refreshAllInputs(this)},typingHandler:function(){setTimeout(o(function(){if(this.element.value.length){this.togglePlaceholderText(!1);this.refreshClasses()}},this),10)},intervalHandler:function(){typeof this.tmpValue=="undefined"&&(this.tmpValue=this.element.value);this.tmpValue!=this.element.value&&PlaceholderInput.refreshAllInputs(this)},refreshState:function(){this.wrapWithElement&&(this.element.value.length&&this.element.value!==this.origValue?this.togglePlaceholderText(!1):this.element.value.length||this.togglePlaceholderText(!0));this.refreshClasses()},refreshClasses:function(){this.textActive=this.focused||this.element.value.length&&this.element.value!==this.origValue;this.setStateClass(this.element,this.options.inputFocusClass,this.focused);this.setStateClass(this.elementParent,this.options.parentFocusClass,this.focused);this.setStateClass(this.labelFor,this.options.labelFocusClass,this.focused);this.setStateClass(this.element,this.options.inputActiveClass,this.textActive);this.setStateClass(this.elementParent,this.options.parentActiveClass,this.textActive);this.setStateClass(this.labelFor,this.options.labelActiveClass,this.textActive)},setStateClass:function(e,t,n){if(!e)return;n?i(e,t):s(e,t)}}})();window.addEventListener?window.addEventListener("load",initInputs,!1):window.attachEvent&&window.attachEvent("onload",initInputs);$(".lightbox-image").length&&$(".lightbox-image").colorbox({fixed:!0,maxWidth:"75%"});$(".map-lightbox-logo").length&&$(".map-lightbox-logo").colorbox({fixed:!0,maxWidth:"75%"});
